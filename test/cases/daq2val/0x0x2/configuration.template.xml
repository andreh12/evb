<xc:Partition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xc="http://xdaq.web.cern.ch/xdaq/xsd/2004/XMLConfiguration-30">
  
  <i2o:protocol xmlns:i2o="http://xdaq.web.cern.ch/xdaq/xsd/2004/I2OConfiguration-30">
    <i2o:target class="evb::EVM" instance="0" tid="1"/>
    <i2o:target class="evb::BU" instance="0" tid="30"/>
    <i2o:target class="evb::BU" instance="1" tid="31"/>
  </i2o:protocol>
  
  
  <xc:Context url="http://RU0_SOAP_HOST_NAME:RU0_SOAP_PORT">
    
    <pol:policy xmlns:pol="http://xdaq.web.cern.ch/xdaq/xsd/2013/XDAQPolicy-10">
      <pol:element pattern="urn:toolbox-task-workloop:udapl-receiver/polling" type="thread" package="numa" mempolicy="onnode" memnode="1" affinity="6" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-sender/polling" type="thread" package="numa" mempolicy="onnode" memnode="1" affinity="2" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-i2o(.+)" type="thread" package="numa" mempolicy="onnode" memnode="1" cpunodes="1" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-cno(.+)" type="thread" package="numa" mempolicy="onnode" memnode="1" cpunodes="1"  />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-connector(.+)" type="thread" package="numa" mempolicy="onnode" memnode="1" cpunodes="1" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-acceptor(.+)" type="thread" package="numa" mempolicy="onnode" memnode="1" cpunodes="1" />
      <pol:element pattern="urn:toolbox-mem-allocator:CommittedHeapAllocator" type="alloc" package="numa" mempolicy="onnode" node="0" />
      <pol:element pattern="toolbox-mem-allocator-udapl-sender-ofa-v2-ib0" type="alloc" package="numa" mempolicy="onnode" node="0" />
      <pol:element pattern="toolbox-mem-allocator-udapl-receiver-ofa-v2-ib0" type="alloc" package="numa" mempolicy="onnode" node="1" />
      <pol:element pattern="urn:squeue:alloc" type="alloc" package="numa" mempolicy="onnode" node="0" />
    </pol:policy>
    
    <xc:Endpoint protocol="udapl" service="i2o" hostname="RU0_I2O_HOST_NAME" port="RU0_I2O_PORT" network="infini" />
    
    <xc:Application class="pt::udapl::Application" id="10" network="local">
      <properties xmlns="urn:xdaq-application:pt::udapl::Application" xsi:type="soapenc:Struct">
        <iaName xsi:type="xsd:string">ofa-v2-ib0</iaName>
        <senderPoolSize xsi:type="xsd:unsignedInt">0xFA00000</senderPoolSize>
        <receiverPoolSize xsi:type="xsd:unsignedInt">0x40000000</receiverPoolSize>
      </properties>
    </xc:Application>
    
    <xc:Application class="xmem::probe::Application" id="21" instance="0" network="local"/>
    
    <xc:Application class="evb::EVM" id="43" instance="0" network="infini">
      <properties xmlns="urn:xdaq-application:evb::EVM" xsi:type="soapenc:Struct">
        <inputSource xsi:type="xsd:string">Local</inputSource>
        <dropInputData xsi:type="xsd:boolean">false</dropInputData>
        <blockSize xsi:type="xsd:unsignedInt">65536</blockSize>
      </properties>
    </xc:Application>

    <xc:Module>/usr/lib64/libdat2.so</xc:Module>
    <xc:Module>$XDAQ_LOCAL/lib/libevb.so</xc:Module>
    <xc:Module>$XDAQ_ROOT/lib/libptudapl.so</xc:Module>		
    <xc:Module>$XDAQ_ROOT/lib/libxmemprobe.so</xc:Module>
    
  </xc:Context>

  
  <xc:Context url="http://BU0_SOAP_HOST_NAME:BU0_SOAP_PORT">
    <pol:policy xmlns:pol="http://xdaq.web.cern.ch/xdaq/xsd/2013/XDAQPolicy-10">
      <pol:element pattern="urn:toolbox-task-workloop:udapl-i2o-dispatcher-loop/polling" type="thread" package="numa" mempolicy="local" affinity="8" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-receiver/polling" type="thread" package="numa" mempolicy="local" affinity="12" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-sender/polling" type="thread" package="numa" mempolicy="local" affinity="10" />
      <pol:element pattern="toolbox-mem-allocator-udapl-sender-ofa-v2-ib0" type="alloc" package="numa" mempolicy="onnode" node="1" />
      <pol:element pattern="toolbox-mem-allocator-udapl-receiver-ofa-v2-ib0" type="alloc" package="numa" mempolicy="onnode" node="1" />
    </pol:policy>
    
    <xc:Endpoint protocol="udapl" service="i2o" hostname="BU0_I2O_HOST_NAME" port="BU0_I2O_PORT" network="infini" />
    <xc:Application class="pt::udapl::Application"  id="21" network="infini">
      <properties xmlns="urn:xdaq-application:pt::udapl::Application" xsi:type="soapenc:Struct">
        <senderPoolSize xsi:type="xsd:unsignedInt">0x40000000</senderPoolSize>
        <receiverPoolSize xsi:type="xsd:unsignedInt">0x40000000</receiverPoolSize>
        <iaName xsi:type="xsd:string">ofa-v2-ib0</iaName>
      </properties>
    </xc:Application>
    
    <xc:Application class="xmem::probe::Application" id="22" instance="0" network="local"/>

    <xc:Application class="evb::BU" id="43" instance="0" network="infini">
      <properties xmlns="urn:xdaq-application:evb::BU" xsi:type="soapenc:Struct">
        <dropEventData xsi:type="xsd:boolean">true</dropEventData>
        <eventsPerRequest xsi:type="xsd:unsignedInt">1</eventsPerRequest>
      </properties>
    </xc:Application>

    <xc:Module>/usr/lib64/libdat2.so</xc:Module>
    <xc:Module>$XDAQ_LOCAL/lib/libevb.so</xc:Module>
    <xc:Module>$XDAQ_ROOT/lib/libptudapl.so</xc:Module>
    <xc:Module>$XDAQ_ROOT/lib/libxmemprobe.so</xc:Module>
       
  </xc:Context>
  
  
  <xc:Context url="http://BU1_SOAP_HOST_NAME:BU1_SOAP_PORT">
    <pol:policy xmlns:pol="http://xdaq.web.cern.ch/xdaq/xsd/2013/XDAQPolicy-10">
      <pol:element pattern="urn:toolbox-task-workloop:udapl-i2o-dispatcher-loop/polling" type="thread" package="numa" mempolicy="local" affinity="8" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-receiver/polling" type="thread" package="numa" mempolicy="local" affinity="12" />
      <pol:element pattern="urn:toolbox-task-workloop:udapl-sender/polling" type="thread" package="numa" mempolicy="local" affinity="10" />
      <pol:element pattern="toolbox-mem-allocator-udapl-sender-ofa-v2-ib0" type="alloc" package="numa" mempolicy="onnode" node="1" />
      <pol:element pattern="toolbox-mem-allocator-udapl-receiver-ofa-v2-ib0" type="alloc" package="numa" mempolicy="onnode" node="1" />
    </pol:policy>
    
    <xc:Endpoint protocol="udapl" service="i2o" hostname="BU1_I2O_HOST_NAME" port="BU1_I2O_PORT" network="infini" />
    <xc:Application class="pt::udapl::Application"  id="21" network="infini">
      <properties xmlns="urn:xdaq-application:pt::udapl::Application" xsi:type="soapenc:Struct">
        <senderPoolSize xsi:type="xsd:unsignedInt">0x40000000</senderPoolSize>
        <receiverPoolSize xsi:type="xsd:unsignedInt">0x40000000</receiverPoolSize>
        <iaName xsi:type="xsd:string">ofa-v2-ib0</iaName>
      </properties>
    </xc:Application>
    
    <xc:Application class="xmem::probe::Application" id="22" instance="0" network="local"/>
    
    <xc:Application class="evb::BU" id="43" instance="1" network="infini">
      <properties xmlns="urn:xdaq-application:evb::BU" xsi:type="soapenc:Struct">
        <dropEventData xsi:type="xsd:boolean">true</dropEventData>
        <eventsPerRequest xsi:type="xsd:unsignedInt">1</eventsPerRequest>
      </properties>
    </xc:Application>

    <xc:Module>/usr/lib64/libdat2.so</xc:Module>
    <xc:Module>$XDAQ_LOCAL/lib/libevb.so</xc:Module>
    <xc:Module>$XDAQ_ROOT/lib/libptudapl.so</xc:Module>
    <xc:Module>$XDAQ_ROOT/lib/libxmemprobe.so</xc:Module>
    
  </xc:Context>
  
</xc:Partition>
